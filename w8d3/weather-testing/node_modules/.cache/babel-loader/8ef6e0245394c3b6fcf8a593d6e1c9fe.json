{"ast":null,"code":"import _objectSpread from\"/home/francis/lighthouse/lectures/2022-east-sep19/w8d3/weather-testing/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/francis/lighthouse/lectures/2022-east-sep19/w8d3/weather-testing/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/francis/lighthouse/lectures/2022-east-sep19/w8d3/weather-testing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";import CityForm from\"./components/CityForm\";import CityList from\"./components/CityList\";import CurrentWeather from\"./components/CurrentWeather\";import\"./App.css\";// 09fd719b4b698ec0260e424f83378e3d\n// https://api.openweathermap.org/data/2.5/weather?q={city name}&appid={API key}\n// https://api.openweathermap.org/data/2.5/weather?lat={lat}&lon={lon}&appid={API key}\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),currentCity=_useState2[0],setCurrentCity=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cityHistory=_useState4[0],setCityHistory=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),weatherData=_useState6[0],setWeatherData=_useState6[1];var fetchWeatherAPIByCoords=function fetchWeatherAPIByCoords(lat,lon){var APIKEY=\"09fd719b4b698ec0260e424f83378e3d\";var url=\"https://api.openweathermap.org/data/2.5/weather?lat=\".concat(lat,\"&lon=\").concat(lon,\"&appid=\").concat(APIKEY);return axios.get(url).then(function(res){return res.data;}).then(function(data){var weatherObj={temperature:Math.round(data.main.temp-273.15),conditions:data.weather[0].description,city:data.name};return weatherObj;}).then(function(data){setCurrentCity(data.city);setWeatherData(data);});};useEffect(function(){navigator.geolocation.getCurrentPosition(function(_ref){var coords=_ref.coords;return fetchWeatherAPIByCoords(coords.latitude,coords.longitude);},function(){return console.log(\"no permission\");});},[]);var fetchWeatherAPI=function fetchWeatherAPI(cityName){var APIKEY=\"09fd719b4b698ec0260e424f83378e3d\";var url=\"https://api.openweathermap.org/data/2.5/weather?q=\".concat(cityName,\"&appid=\").concat(APIKEY);return axios.get(url).then(function(res){var weatherObj={temperature:Math.round(res.data.main.temp-273.15),conditions:res.data.weather[0].description};return weatherObj;});};var weatherSubmit=function weatherSubmit(formData){var city=formData.city;fetchWeatherAPI(city).then(function(data){setCurrentCity(city);setWeatherData(data);!cityHistory.includes(city)&&setCityHistory([].concat(_toConsumableArray(cityHistory),[city]));}).catch(function(err){console.log(err);});};var fetchWeather=function fetchWeather(city){fetchWeatherAPI(city).then(function(data){setCurrentCity(city);setWeatherData(data);}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Super weather YEAH! \\u26C5\\uD83C\\uDF2A\\uFE0F\\uD83C\\uDF29\\uFE0F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"WHAT'S YOUR NAME !!!????\"})]}),/*#__PURE__*/_jsx(CityForm,{onSubmit:weatherSubmit}),/*#__PURE__*/_jsx(CityList,{cities:cityHistory,fetchWeather:fetchWeather}),currentCity&&/*#__PURE__*/_jsx(CurrentWeather,_objectSpread({city:currentCity},weatherData))]});}export default App;","map":{"version":3,"names":["useState","useEffect","axios","CityForm","CityList","CurrentWeather","App","currentCity","setCurrentCity","cityHistory","setCityHistory","weatherData","setWeatherData","fetchWeatherAPIByCoords","lat","lon","APIKEY","url","get","then","res","data","weatherObj","temperature","Math","round","main","temp","conditions","weather","description","city","name","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","console","log","fetchWeatherAPI","cityName","weatherSubmit","formData","includes","catch","err","fetchWeather"],"sources":["/home/francis/lighthouse/lectures/2022-east-sep19/w8d3/weather-testing/src/App.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nimport CityForm from \"./components/CityForm\";\nimport CityList from \"./components/CityList\";\nimport CurrentWeather from \"./components/CurrentWeather\";\n\nimport \"./App.css\";\n\n// 09fd719b4b698ec0260e424f83378e3d\n// https://api.openweathermap.org/data/2.5/weather?q={city name}&appid={API key}\n// https://api.openweathermap.org/data/2.5/weather?lat={lat}&lon={lon}&appid={API key}\n\nfunction App() {\n  const [currentCity, setCurrentCity] = useState(\"\");\n  const [cityHistory, setCityHistory] = useState([]);\n  const [weatherData, setWeatherData] = useState(null);\n\n  const fetchWeatherAPIByCoords = (lat, lon) => {\n    const APIKEY = \"09fd719b4b698ec0260e424f83378e3d\";\n    const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${APIKEY}`;\n\n    return axios\n      .get(url)\n      .then((res) => res.data)\n      .then((data) => {\n        const weatherObj = {\n          temperature: Math.round(data.main.temp - 273.15),\n          conditions: data.weather[0].description,\n          city: data.name,\n        };\n        return weatherObj;\n      })\n      .then((data) => {\n        setCurrentCity(data.city);\n        setWeatherData(data);\n      });\n  };\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(\n      ({ coords }) => fetchWeatherAPIByCoords(coords.latitude, coords.longitude),\n      () => console.log(\"no permission\")\n    );\n  }, []);\n\n  const fetchWeatherAPI = (cityName) => {\n    const APIKEY = \"09fd719b4b698ec0260e424f83378e3d\";\n    const url = `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=${APIKEY}`;\n\n    return axios.get(url).then((res) => {\n      const weatherObj = {\n        temperature: Math.round(res.data.main.temp - 273.15),\n        conditions: res.data.weather[0].description,\n      };\n      return weatherObj;\n    });\n  };\n\n  const weatherSubmit = (formData) => {\n    const { city } = formData;\n    fetchWeatherAPI(city)\n      .then((data) => {\n        setCurrentCity(city);\n        setWeatherData(data);\n        !cityHistory.includes(city) && setCityHistory([...cityHistory, city]);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const fetchWeather = (city) => {\n    fetchWeatherAPI(city)\n      .then((data) => {\n        setCurrentCity(city);\n        setWeatherData(data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  return (\n    <div className=\"App\">\n      <header>\n        <h1>Super weather YEAH! ‚õÖüå™Ô∏èüå©Ô∏è</h1>\n        <input type=\"text\" placeholder=\"WHAT'S YOUR NAME !!!????\" />\n      </header>\n      <CityForm onSubmit={weatherSubmit} />\n      <CityList cities={cityHistory} fetchWeather={fetchWeather} />\n      {currentCity && <CurrentWeather city={currentCity} {...weatherData} />}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}